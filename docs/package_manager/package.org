# -*- mode: org; coding: utf-8-unix -*-
#+OPTIONS: \n:t

* package.el
  Emacs 24 から標準で使えるパッケージ管理ツール．

  自分はまともに使ったことがないので， [[http://emacs-jp.github.io/packages/package-management/package-el.html][package.el]] を参考に進めてみる．

  単体でパッケージをインストールする方法は簡単で，
  
  #+BEGIN_SRC
  M-x package-install
  #+END_SRC

  を実行する．すると =Install package:= とミニバッファに表示される．

  ここで =TAB= を押すとパッケージの一覧が表示されるため，

  その中からインストールしたいパッケージを見つけ，

  パッケージ名を入力することでパッケージをインストールすることができる．

  また，パッケージを一覧から複数選択してインストール，アンインストールしたい場合には，

  #+BEGIN_SRC
  M-x package-list-packages
  #+END_SRC

  を実行すると，パッケージの一覧が表示される．
    
  パッケージ一覧が表示されたときに行える操作は次のようになっている．
    
    
  | キー     | 概要                               |
  |----------+------------------------------------|
  | =r=      | パッケージ一覧の更新               |
  | =i=      | インストールマークをつける         |
  | =d=      | 削除マークをつける                 |
  | =~=      | 古いパッケージに削除マークをつける |
  | =u=      | マークを除去する                   |
  | =x=      | マークの実行                       |
  | =?=      | パッケージの概要表示               |
  | =U=      | アップグレード                     |
  | =n=      | 次の行へ移動                       |
  | =p=      | 前の行へ移動                       |
  | =h=      | help                               |
  | =q=, =z= | 終了                               |

  =package.el= はデフォルトで [[http://elpa.gnu.org/packages/][elpha.gnu.org]] からパッケージを取得する．

  見てもらえればわかるが，登録されているパッケージが少ない．

  [[http://emacs-jp.github.io/packages/package-management/package-el.html][package.el]] で説明されているようにリポジトリを追加する．各リポジトリについては，リンク先を読むとわかる．

  #+BEGIN_SRC emacs-lisp
(require 'package)

(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(add-to-list 'package-archives '("melpa-stable" . "https://stable.melpa.org/packages/") t)
(add-to-list 'package-archives  '("marmalade" . "http://marmalade-repo.org/packages/") t)
(add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/") t)

(package-initialize)
  #+END_SRC
    
  =elpha= 以外のリポジトリからパッケージをインストールすることができるようになる．

  起動時に自動で指定したパッケージをインストールするためには， =~/.emacs.d/init.el= に以下のように記述するとよい．
    
  #+BEGIN_SRC emacs-lisp    
  (require 'package)
  
  (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
  (add-to-list 'package-archives '("melpa-stable" . "https://stable.melpa.org/packages/") t)
  (add-to-list 'package-archives  '("marmalade" . "http://marmalade-repo.org/packages/") t)
  (add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/") t)

  (package-initialize)

  (defvar my-install-package
    '(
      helm
     ))
    
  (dolist (pkg my-install-package)
    (unless (package-installed-p pkg)
      (package-install pkg)))
  #+END_SRC
    
  この例では， =helm= がインストールされていない場合にのみ =helm= のインストールを行う．

  *参考*

  - [[http://emacs-jp.github.io/packages/package-management/package-el][Emacs JP - package.el]]
  - [[http://qiita.com/catatsuy/items/5f1cd86e2522fd3384a0][Qiita - init-loader.el と package.el を導入して快適 Emacs ライフ]]
  - [[http://blog.wagavulin.jp/entry/2016/07/04/211631][wagavulin's blog - package.el で自動インストール]]
